function last_pkgs --description "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é –ø–∞–∫–µ—Ç—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"
    # –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    set -l limit 20

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–µ–¥–∞–Ω –ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç
    if test (count $argv) -gt 0
        set limit $argv[1]
    else
        # –í—ã–≤–æ–¥–∏–º –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ stderr (–ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫), —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –≤—ã–≤–æ–¥
        echo "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'last_pkgs <—á–∏—Å–ª–æ>', —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (—Å–µ–π—á–∞—Å $limit)." >&2
    end

    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω–≤–µ–π–µ—Ä
    expac --timefmt='%Y-%m-%d %T' '%l\t%n\t%w' | grep 'explicit' | sort | tail -n $limit | while read -l line
        # –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ —Ç–∞–±—É–ª—è—Ü–∏–∏
        set -l parts (string split \t $line)
        set -l dt $parts[1]
        set -l name $parts[2]

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        # expac -S –∏—â–µ—Ç –≤ sync –±–∞–∑–µ. –ï—Å–ª–∏ –ø—É—Å—Ç–æ -> –∑–Ω–∞—á–∏—Ç –ø–∞–∫–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π/AUR
        set -l repo (expac -S '%r' $name 2>/dev/null)
        
        if test -z "$repo"
            set repo "aur"
            # –ö—Ä–∞—Å–∏–º AUR –≤ –∂–µ–ª—Ç—ã–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            set_color yellow
        else
            # –ö—Ä–∞—Å–∏–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–ø—ã –≤ –≥–æ–ª—É–±–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            set_color cyan
        end

        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥: –î–∞—Ç–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ (–≤—ã—Ä–∞–≤–Ω–µ–Ω–æ) | –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        printf "%s | %-25s | %s\n" $dt $name $repo
        
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ü–≤–µ—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏
        set_color normal
    end
end
